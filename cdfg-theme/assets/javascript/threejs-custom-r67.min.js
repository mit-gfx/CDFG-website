var THREE={REVISION:"67"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!self.requestAnimationFrame;++i)self.requestAnimationFrame=self[e[i]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[e[i]+"CancelAnimationFrame"]||self[e[i]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(e){var i=Date.now(),r=Math.max(0,16-(i-t)),n=self.setTimeout(function(){e(i+r)},r);return t=i+r,n}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(t){self.clearTimeout(t)})}(),THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Color=function(t){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(t)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(t){return t instanceof THREE.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){if(0===e)this.r=this.g=this.b=i;else{var r=function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+6*(e-t)*(2/3-i):t},n=.5>=i?i*(1+e):i+e-i*e,s=2*i-n;this.r=r(s,n,t+1/3),this.g=r(s,n,t),this.b=r(s,n,t-1/3)}return this},setStyle:function(t){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t)){var e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t);return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t)){var e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t);return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(t)){var e=/^\#([0-9a-f]{6})$/i.exec(t);return this.setHex(parseInt(e[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)){var e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t);return this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this}return/^(\w+)$/i.test(t)?(this.setHex(THREE.ColorKeywords[t]),this):void 0},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t){return this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b,this},copyLinearToGamma:function(t){return this.r=Math.sqrt(t.r),this.g=Math.sqrt(t.g),this.b=Math.sqrt(t.b),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,r=t||{h:0,s:0,l:0},n=this.r,s=this.g,o=this.b,a=Math.max(n,s,o),h=Math.min(n,s,o),c=(h+a)/2;if(h===a)e=0,i=0;else{var l=a-h;switch(i=.5>=c?l/(a+h):l/(2-a-h),a){case n:e=(s-o)/l+(o>s?6:0);break;case s:e=(o-n)/l+2;break;case o:e=(n-s)/l+4}e/=6}return r.h=e,r.s=i,r.l=c,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof THREE.Euler==!1)throw new Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var i=Math.cos(t._x/2),r=Math.cos(t._y/2),n=Math.cos(t._z/2),s=Math.sin(t._x/2),o=Math.sin(t._y/2),a=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=s*r*n+i*o*a,this._y=i*o*n-s*r*a,this._z=i*r*a+s*o*n,this._w=i*r*n-s*o*a):"YXZ"===t.order?(this._x=s*r*n+i*o*a,this._y=i*o*n-s*r*a,this._z=i*r*a-s*o*n,this._w=i*r*n+s*o*a):"ZXY"===t.order?(this._x=s*r*n-i*o*a,this._y=i*o*n+s*r*a,this._z=i*r*a+s*o*n,this._w=i*r*n-s*o*a):"ZYX"===t.order?(this._x=s*r*n-i*o*a,this._y=i*o*n+s*r*a,this._z=i*r*a-s*o*n,this._w=i*r*n+s*o*a):"YZX"===t.order?(this._x=s*r*n+i*o*a,this._y=i*o*n+s*r*a,this._z=i*r*a-s*o*n,this._w=i*r*n-s*o*a):"XZY"===t.order&&(this._x=s*r*n-i*o*a,this._y=i*o*n-s*r*a,this._z=i*r*a+s*o*n,this._w=i*r*n+s*o*a),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,r=i[0],n=i[4],s=i[8],o=i[1],a=i[5],h=i[9],c=i[2],l=i[6],u=i[10],p=r+a+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(l-h)*e,this._y=(s-c)*e,this._z=(o-n)*e):r>a&&r>u?(e=2*Math.sqrt(1+r-a-u),this._w=(l-h)/e,this._x=.25*e,this._y=(n+o)/e,this._z=(s+c)/e):a>u?(e=2*Math.sqrt(1+a-r-u),this._w=(s-c)/e,this._x=(n+o)/e,this._y=.25*e,this._z=(h+l)/e):(e=2*Math.sqrt(1+u-r-a),this._w=(o-n)/e,this._x=(s+c)/e,this._y=(h+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,i=1e-6;return function(r,n){return void 0===t&&(t=new THREE.Vector3),e=r.dot(n)+1,i>e?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var i=t._x,r=t._y,n=t._z,s=t._w,o=e._x,a=e._y,h=e._z,c=e._w;return this._x=i*c+s*o+r*h-n*a,this._y=r*c+s*a+n*o-i*h,this._z=n*c+s*h+i*a-r*o,this._w=s*c-i*o-r*a-n*h,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){var i=this._x,r=this._y,n=this._z,s=this._w,o=s*t._w+i*t._x+r*t._y+n*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;var a=Math.acos(o),h=Math.sqrt(1-o*o);if(Math.abs(h)<.001)return this._w=.5*(s+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this;var c=Math.sin((1-e)*a)/h,l=Math.sin(e*a)/h;return this._w=s*c+this._w*l,this._x=i*c+this._x*l,this._y=r*c+this._y*l,this._z=n*c+this._z*l,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],this._w=t[3],this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(t,e,i,r){return i.copy(t).slerp(e,r)},THREE.Vector2=function(t,e){this.x=t||0,this.y=e||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new THREE.Vector2,e=new THREE.Vector2),t.set(i,i),e.set(r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t){return this.x=t[0],this.y=t[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof THREE.Euler==!1&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code."),void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,i)),this}}(),applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r+n[12],this.y=n[1]*e+n[5]*i+n[9]*r+n[13],this.z=n[2]*e+n[6]*i+n[10]*r+n[14],this},applyProjection:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*r-o*i,c=a*i+o*e-n*r,l=a*r+n*i-s*e,u=-n*e-s*i-o*r;return this.x=h*a+u*-n+c*-o-l*-s,this.y=c*a+u*-s+l*-n-h*-o,this.z=l*a+u*-o+h*-s-c*-n,this},transformDirection:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r,this.y=n[1]*e+n[5]*i+n[9]*r,this.z=n[2]*e+n[6]*i+n[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new THREE.Vector3,e=new THREE.Vector3),t.set(i,i,i),e.set(r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},cross:function(t,e){if(void 0!==e)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,r=this.y,n=this.z;return this.x=r*t.z-n*t.y,this.y=n*t.x-i*t.z,this.z=i*t.y-r*t.x,this},crossVectors:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,o=e.y,a=e.z;return this.x=r*a-n*o,this.y=n*s-i*a,this.z=i*o-r*s,this},projectOnVector:function(){var t,e;return function(i){return void 0===t&&(t=new THREE.Vector3),t.copy(i).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new THREE.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/(this.length()*t.length());return Math.acos(THREE.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r},setEulerFromRotationMatrix:function(){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},setEulerFromQuaternion:function(){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(t){return console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),i=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),r=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=i,this.z=r,this},setFromMatrixColumn:function(t,e){var i=4*t,r=e.elements;return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t){return this.x=t[0],this.y=t[1],this.z=t[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(t,e,i,r){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},sub:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e,this.w*=e}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r,n,s=.01,o=.1,a=t.elements,h=a[0],c=a[4],l=a[8],u=a[1],p=a[5],E=a[9],m=a[2],d=a[6],f=a[10];if(Math.abs(c-u)<s&&Math.abs(l-m)<s&&Math.abs(E-d)<s){if(Math.abs(c+u)<o&&Math.abs(l+m)<o&&Math.abs(E+d)<o&&Math.abs(h+p+f-3)<o)return this.set(1,0,0,0),this;e=Math.PI;var y=(h+1)/2,x=(p+1)/2,v=(f+1)/2,T=(c+u)/4,R=(l+m)/4,g=(E+d)/4;return y>x&&y>v?s>y?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(y),r=T/i,n=R/i):x>v?s>x?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(x),i=T/r,n=g/r):s>v?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(v),i=R/n,r=g/n),this.set(i,r,n,e),this}var w=Math.sqrt((d-E)*(d-E)+(l-m)*(l-m)+(u-c)*(u-c));return Math.abs(w)<.001&&(w=1),this.x=(d-E)/w,this.y=(l-m)/w,this.z=(u-c)/w,this.w=Math.acos((h+p+f-1)/2),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this.w<t.w?this.w=t.w:this.w>e.w&&(this.w=e.w),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new THREE.Vector4,e=new THREE.Vector4),t.set(i,i,i,i),e.set(r,r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t){return this.x=t[0],this.y=t[1],this.z=t[2],this.w=t[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e){var i=THREE.Math.clamp,r=t.elements,n=r[0],s=r[4],o=r[8],a=r[1],h=r[5],c=r[9],l=r[2],u=r[6],p=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(u,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(o,p),this._z=Math.atan2(a,h)):(this._y=Math.atan2(-l,n),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(-l,p),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(a,n))):"ZYX"===e?(this._y=Math.asin(-i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(u,p),this._z=Math.atan2(a,n)):(this._x=0,this._z=Math.atan2(-s,h))):"YZX"===e?(this._z=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-l,n)):(this._x=0,this._y=Math.atan2(o,p))):"XZY"===e?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(u,h),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+e),this._order=e,this.onChangeCallback(),this},setFromQuaternion:function(t,e,i){var r=THREE.Math.clamp,n=t.x*t.x,s=t.y*t.y,o=t.z*t.z,a=t.w*t.w;return e=e||this._order,"XYZ"===e?(this._x=Math.atan2(2*(t.x*t.w-t.y*t.z),a-n-s+o),this._y=Math.asin(r(2*(t.x*t.z+t.y*t.w),-1,1)),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),a+n-s-o)):"YXZ"===e?(this._x=Math.asin(r(2*(t.x*t.w-t.y*t.z),-1,1)),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),a-n-s+o),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),a-n+s-o)):"ZXY"===e?(this._x=Math.asin(r(2*(t.x*t.w+t.y*t.z),-1,1)),this._y=Math.atan2(2*(t.y*t.w-t.z*t.x),a-n-s+o),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),a-n+s-o)):"ZYX"===e?(this._x=Math.atan2(2*(t.x*t.w+t.z*t.y),a-n-s+o),this._y=Math.asin(r(2*(t.y*t.w-t.x*t.z),-1,1)),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),a+n-s-o)):"YZX"===e?(this._x=Math.atan2(2*(t.x*t.w-t.z*t.y),a-n+s-o),this._y=Math.atan2(2*(t.y*t.w-t.x*t.z),a+n-s-o),this._z=Math.asin(r(2*(t.x*t.y+t.z*t.w),-1,1))):"XZY"===e?(this._x=Math.atan2(2*(t.x*t.w+t.y*t.z),a-n+s-o),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),a+n-s-o),this._z=Math.asin(r(2*(t.z*t.w-t.x*t.y),-1,1))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+e),this._order=e,i!==!1&&this.onChangeCallback(),this
},reorder:function(){var t=new THREE.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Box2=function(t,e){this.min=void 0!==t?t:new THREE.Vector2(1/0,1/0),this.max=void 0!==e?e:new THREE.Vector2(-1/0,-1/0)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){if(t.length>0){var e=t[0];this.min.copy(e),this.max.copy(e);for(var i=1,r=t.length;r>i;i++)e=t[i],e.x<this.min.x?this.min.x=e.x:e.x>this.max.x&&(this.max.x=e.x),e.y<this.min.y?this.min.y=e.y:e.y>this.max.y&&(this.max.y=e.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var t=new THREE.Vector2;return function(e,i){var r=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var e=t||new THREE.Vector2;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new THREE.Vector2;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y?!0:!1},getParameter:function(t,e){var i=e||new THREE.Vector2;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},clampPoint:function(t,e){var i=e||new THREE.Vector2;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector2;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(t,e){this.min=void 0!==t?t:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new THREE.Vector3(-1/0,-1/0,-1/0)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},addPoint:function(t){return t.x<this.min.x?this.min.x=t.x:t.x>this.max.x&&(this.max.x=t.x),t.y<this.min.y?this.min.y=t.y:t.y>this.max.y&&(this.max.y=t.y),t.z<this.min.z?this.min.z=t.z:t.z>this.max.z&&(this.max.z=t.z),this},setFromPoints:function(t){if(t.length>0){var e=t[0];this.min.copy(e),this.max.copy(e);for(var i=1,r=t.length;r>i;i++)this.addPoint(t[i])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var t=new THREE.Vector3;return function(e,i){var r=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new THREE.Vector3;return function(e){var i=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){if(void 0!==e.geometry&&void 0!==e.geometry.vertices)for(var r=e.geometry.vertices,n=0,s=r.length;s>n;n++)t.copy(r[n]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var e=t||new THREE.Vector3;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new THREE.Vector3;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t,e){var i=e||new THREE.Vector3;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},clampPoint:function(t,e){var i=e||new THREE.Vector3;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),getBoundingSphere:function(){var t=new THREE.Vector3;return function(e){var i=e||new THREE.Sphere;return i.center=this.center(),i.radius=.5*this.size(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(t,e,i,r,n,s,o,a,h){this.elements=new Float32Array(9);var c=this.elements;c[0]=void 0!==t?t:1,c[3]=e||0,c[6]=i||0,c[1]=r||0,c[4]=void 0!==n?n:1,c[7]=s||0,c[2]=o||0,c[5]=a||0,c[8]=void 0!==h?h:1},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(t,e,i,r,n,s,o,a,h){var c=this.elements;return c[0]=t,c[3]=e,c[6]=i,c[1]=r,c[4]=n,c[7]=s,c[2]=o,c[5]=a,c[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("DEPRECATED: Matrix3's .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length);for(var n=0,s=i;r>n;n+=3,s+=3)t.x=e[s],t.y=e[s+1],t.z=e[s+2],t.applyMatrix3(this),e[s]=t.x,e[s+1]=t.y,e[s+2]=t.z;return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],c=t[8];return e*s*c-e*o*h-i*n*c+i*o*a+r*n*h-r*s*a},getInverse:function(t,e){var i=t.elements,r=this.elements;r[0]=i[10]*i[5]-i[6]*i[9],r[1]=-i[10]*i[1]+i[2]*i[9],r[2]=i[6]*i[1]-i[2]*i[5],r[3]=-i[10]*i[4]+i[6]*i[8],r[4]=i[10]*i[0]-i[2]*i[8],r[5]=-i[6]*i[0]+i[2]*i[4],r[6]=i[9]*i[4]-i[5]*i[8],r[7]=-i[9]*i[0]+i[1]*i[8],r[8]=i[5]*i[0]-i[1]*i[4];var n=i[0]*r[0]+i[1]*r[3]+i[2]*r[6];if(0===n){var s="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(s);return console.warn(s),this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){var t=this.elements;return new THREE.Matrix3(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])}},THREE.Matrix4=function(t,e,i,r,n,s,o,a,h,c,l,u,p,E,m,d){this.elements=new Float32Array(16);var f=this.elements;f[0]=void 0!==t?t:1,f[4]=e||0,f[8]=i||0,f[12]=r||0,f[1]=n||0,f[5]=void 0!==s?s:1,f[9]=o||0,f[13]=a||0,f[2]=h||0,f[6]=c||0,f[10]=void 0!==l?l:1,f[14]=u||0,f[3]=p||0,f[7]=E||0,f[11]=m||0,f[15]=void 0!==d?d:1},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(t,e,i,r,n,s,o,a,h,c,l,u,p,E,m,d){var f=this.elements;return f[0]=t,f[4]=e,f[8]=i,f[12]=r,f[1]=n,f[5]=s,f[9]=o,f[13]=a,f[2]=h,f[6]=c,f[10]=l,f[14]=u,f[3]=p,f[7]=E,f[11]=m,f[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractRotation:function(){var t=new THREE.Vector3;return function(e){var i=this.elements,r=e.elements,n=1/t.set(r[0],r[1],r[2]).length(),s=1/t.set(r[4],r[5],r[6]).length(),o=1/t.set(r[8],r[9],r[10]).length();return i[0]=r[0]*n,i[1]=r[1]*n,i[2]=r[2]*n,i[4]=r[4]*s,i[5]=r[5]*s,i[6]=r[6]*s,i[8]=r[8]*o,i[9]=r[9]*o,i[10]=r[10]*o,this}}(),makeRotationFromEuler:function(t){t instanceof THREE.Euler==!1&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var e=this.elements,i=t.x,r=t.y,n=t.z,s=Math.cos(i),o=Math.sin(i),a=Math.cos(r),h=Math.sin(r),c=Math.cos(n),l=Math.sin(n);if("XYZ"===t.order){var u=s*c,p=s*l,E=o*c,m=o*l;e[0]=a*c,e[4]=-a*l,e[8]=h,e[1]=p+E*h,e[5]=u-m*h,e[9]=-o*a,e[2]=m-u*h,e[6]=E+p*h,e[10]=s*a}else if("YXZ"===t.order){var d=a*c,f=a*l,y=h*c,x=h*l;e[0]=d+x*o,e[4]=y*o-f,e[8]=s*h,e[1]=s*l,e[5]=s*c,e[9]=-o,e[2]=f*o-y,e[6]=x+d*o,e[10]=s*a}else if("ZXY"===t.order){var d=a*c,f=a*l,y=h*c,x=h*l;e[0]=d-x*o,e[4]=-s*l,e[8]=y+f*o,e[1]=f+y*o,e[5]=s*c,e[9]=x-d*o,e[2]=-s*h,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){var u=s*c,p=s*l,E=o*c,m=o*l;e[0]=a*c,e[4]=E*h-p,e[8]=u*h+m,e[1]=a*l,e[5]=m*h+u,e[9]=p*h-E,e[2]=-h,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){var v=s*a,T=s*h,R=o*a,g=o*h;e[0]=a*c,e[4]=g-v*l,e[8]=R*l+T,e[1]=l,e[5]=s*c,e[9]=-o*c,e[2]=-h*c,e[6]=T*l+R,e[10]=v-g*l}else if("XZY"===t.order){var v=s*a,T=s*h,R=o*a,g=o*h;e[0]=a*c,e[4]=-l,e[8]=h*c,e[1]=v*l+g,e[5]=s*c,e[9]=T*l-R,e[2]=R*l-T,e[6]=o*c,e[10]=g*l+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z,s=t.w,o=i+i,a=r+r,h=n+n,c=i*o,l=i*a,u=i*h,p=r*a,E=r*h,m=n*h,d=s*o,f=s*a,y=s*h;return e[0]=1-(p+m),e[4]=l-y,e[8]=u+f,e[1]=l+y,e[5]=1-(c+m),e[9]=E-d,e[2]=u-f,e[6]=E+d,e[10]=1-(c+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,s){var o=this.elements;return i.subVectors(r,n).normalize(),0===i.length()&&(i.z=1),t.crossVectors(s,i).normalize(),0===t.length()&&(i.x+=1e-4,t.crossVectors(s,i).normalize()),e.crossVectors(i,t),o[0]=t.x,o[4]=e.x,o[8]=i.x,o[1]=t.y,o[5]=e.y,o[9]=i.y,o[2]=t.z,o[6]=e.z,o[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],o=i[4],a=i[8],h=i[12],c=i[1],l=i[5],u=i[9],p=i[13],E=i[2],m=i[6],d=i[10],f=i[14],y=i[3],x=i[7],v=i[11],T=i[15],R=r[0],g=r[4],w=r[8],H=r[12],M=r[1],b=r[5],z=r[9],S=r[13],_=r[2],C=r[6],V=r[10],j=r[14],A=r[3],D=r[7],F=r[11],O=r[15];return n[0]=s*R+o*M+a*_+h*A,n[4]=s*g+o*b+a*C+h*D,n[8]=s*w+o*z+a*V+h*F,n[12]=s*H+o*S+a*j+h*O,n[1]=c*R+l*M+u*_+p*A,n[5]=c*g+l*b+u*C+p*D,n[9]=c*w+l*z+u*V+p*F,n[13]=c*H+l*S+u*j+p*O,n[2]=E*R+m*M+d*_+f*A,n[6]=E*g+m*b+d*C+f*D,n[10]=E*w+m*z+d*V+f*F,n[14]=E*H+m*S+d*j+f*O,n[3]=y*R+x*M+v*_+T*A,n[7]=y*g+x*b+v*C+T*D,n[11]=y*w+x*z+v*V+T*F,n[15]=y*H+x*S+v*j+T*O,this},multiplyToArray:function(t,e,i){var r=this.elements;return this.multiplyMatrices(t,e),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new THREE.Vector3;return function(e,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length);for(var n=0,s=i;r>n;n+=3,s+=3)t.x=e[s],t.y=e[s+1],t.z=e[s+2],t.applyMatrix4(this),e[s]=t.x,e[s+1]=t.y,e[s+2]=t.z;return e}}(),rotateAxis:function(t){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],o=t[5],a=t[9],h=t[13],c=t[2],l=t[6],u=t[10],p=t[14],E=t[3],m=t[7],d=t[11],f=t[15];return E*(+n*a*l-r*h*l-n*o*u+i*h*u+r*o*p-i*a*p)+m*(+e*a*p-e*h*u+n*s*u-r*s*p+r*h*c-n*a*c)+d*(+e*h*l-e*o*p-n*s*l+i*s*p+n*o*c-i*h*c)+f*(-r*o*c-e*a*l+e*o*u+r*s*l-i*s*u+i*a*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t},getPosition:function(){var t=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,r=t.elements,n=r[0],s=r[4],o=r[8],a=r[12],h=r[1],c=r[5],l=r[9],u=r[13],p=r[2],E=r[6],m=r[10],d=r[14],f=r[3],y=r[7],x=r[11],v=r[15];i[0]=l*d*y-u*m*y+u*E*x-c*d*x-l*E*v+c*m*v,i[4]=a*m*y-o*d*y-a*E*x+s*d*x+o*E*v-s*m*v,i[8]=o*u*y-a*l*y+a*c*x-s*u*x-o*c*v+s*l*v,i[12]=a*l*E-o*u*E-a*c*m+s*u*m+o*c*d-s*l*d,i[1]=u*m*f-l*d*f-u*p*x+h*d*x+l*p*v-h*m*v,i[5]=o*d*f-a*m*f+a*p*x-n*d*x-o*p*v+n*m*v,i[9]=a*l*f-o*u*f-a*h*x+n*u*x+o*h*v-n*l*v,i[13]=o*u*p-a*l*p+a*h*m-n*u*m-o*h*d+n*l*d,i[2]=c*d*f-u*E*f+u*p*y-h*d*y-c*p*v+h*E*v,i[6]=a*E*f-s*d*f-a*p*y+n*d*y+s*p*v-n*E*v,i[10]=s*u*f-a*c*f+a*h*y-n*u*y-s*h*v+n*c*v,i[14]=a*c*p-s*u*p-a*h*E+n*u*E+s*h*d-n*c*d,i[3]=l*E*f-c*m*f-l*p*y+h*m*y+c*p*x-h*E*x,i[7]=s*m*f-o*E*f+o*p*y-n*m*y-s*p*x+n*E*x,i[11]=o*c*f-s*l*f-o*h*y+n*l*y+s*h*x-n*c*x,i[15]=s*l*p-o*c*p+o*h*E-n*l*E-s*h*m+n*c*m;var T=n*i[0]+h*i[4]+p*i[8]+f*i[12];if(0==T){var R="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(R);return console.warn(R),this.identity(),this}return this.multiplyScalar(1/T),this},translate:function(){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z;return e[0]*=i,e[4]*=r,e[8]*=n,e[1]*=i,e[5]*=r,e[9]*=n,e[2]*=i,e[6]*=r,e[10]*=n,e[3]*=i,e[7]*=r,e[11]*=n,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,Math.max(i,r)))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,o=t.y,a=t.z,h=n*s,c=n*o;return this.set(h*s+i,h*o-r*a,h*a+r*o,0,h*o+r*a,c*o+i,c*a-r*s,0,h*a-r*o,c*a+r*s,n*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t=new THREE.Vector3,e=new THREE.Matrix4;return function(i,r,n){var s=this.elements,o=t.set(s[0],s[1],s[2]).length(),a=t.set(s[4],s[5],s[6]).length(),h=t.set(s[8],s[9],s[10]).length(),c=this.determinant();0>c&&(o=-o),i.x=s[12],i.y=s[13],i.z=s[14],e.elements.set(this.elements);var l=1/o,u=1/a,p=1/h;return e.elements[0]*=l,e.elements[1]*=l,e.elements[2]*=l,e.elements[4]*=u,e.elements[5]*=u,e.elements[6]*=u,e.elements[8]*=p,e.elements[9]*=p,e.elements[10]*=p,r.setFromRotationMatrix(e),n.x=o,n.y=a,n.z=h,this}}(),makeFrustum:function(t,e,i,r,n,s){var o=this.elements,a=2*n/(e-t),h=2*n/(r-i),c=(e+t)/(e-t),l=(r+i)/(r-i),u=-(s+n)/(s-n),p=-2*s*n/(s-n);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=h,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(t,e,i,r){var n=i*Math.tan(THREE.Math.degToRad(.5*t)),s=-n,o=s*e,a=n*e;return this.makeFrustum(o,a,s,n,i,r)},makeOrthographic:function(t,e,i,r,n,s){var o=this.elements,a=e-t,h=i-r,c=s-n,l=(e+t)/a,u=(i+r)/h,p=(s+n)/c;return o[0]=2/a,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2/h,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2/c,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){var t=this.elements;return new THREE.Matrix4(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])}},THREE.Ray=function(t,e){this.origin=void 0!==t?t:new THREE.Vector3,this.direction=void 0!==e?e:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var i=e||new THREE.Vector3;return i.copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new THREE.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new THREE.Vector3;i.subVectors(t,this.origin);var r=i.dot(this.direction);return 0>r?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var t=new THREE.Vector3;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceTo(e))}}(),distanceSqToSegment:function(t,e,i,r){var n,s,o,a,h=t.clone().add(e).multiplyScalar(.5),c=e.clone().sub(t).normalize(),l=.5*t.distanceTo(e),u=this.origin.clone().sub(h),p=-this.direction.dot(c),E=u.dot(this.direction),m=-u.dot(c),d=u.lengthSq(),f=Math.abs(1-p*p);if(f>=0)if(n=p*m-E,s=p*E-m,a=l*f,n>=0)if(s>=-a)if(a>=s){var y=1/f;n*=y,s*=y,o=n*(n+p*s+2*E)+s*(p*n+s+2*m)+d}else s=l,n=Math.max(0,-(p*s+E)),o=-n*n+s*(s+2*m)+d;else s=-l,n=Math.max(0,-(p*s+E)),o=-n*n+s*(s+2*m)+d;else-a>=s?(n=Math.max(0,-(-p*l+E)),s=n>0?-l:Math.min(Math.max(-l,-m),l),o=-n*n+s*(s+2*m)+d):a>=s?(n=0,s=Math.min(Math.max(-l,-m),l),o=s*(s+2*m)+d):(n=Math.max(0,-(p*l+E)),s=n>0?l:Math.min(Math.max(-l,-m),l),o=-n*n+s*(s+2*m)+d);else s=p>0?-l:l,n=Math.max(0,-(p*s+E)),o=-n*n+s*(s+2*m)+d;return i&&i.copy(this.direction.clone().multiplyScalar(n).add(this.origin)),r&&r.copy(c.clone().multiplyScalar(s).add(h)),o},isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},isIntersectionPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var i=t.normal.dot(this.direction);return 0>i*e?!0:!1},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0==e)return 0==t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},isIntersectionBox:function(){var t=new THREE.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(t,e){var i,r,n,s,o,a,h=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,u=this.origin;return h>=0?(i=(t.min.x-u.x)*h,r=(t.max.x-u.x)*h):(i=(t.max.x-u.x)*h,r=(t.min.x-u.x)*h),c>=0?(n=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(n=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),i>s||n>r?null:((n>i||i!==i)&&(i=n),(r>s||r!==r)&&(r=s),l>=0?(o=(t.min.z-u.z)*l,a=(t.max.z-u.z)*l):(o=(t.max.z-u.z)*l,a=(t.min.z-u.z)*l),i>a||o>r?null:((o>i||i!==i)&&(i=o),(r>a||r!==r)&&(r=a),0>r?null:this.at(i>=0?i:r,e)))},intersectTriangle:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Vector3;return function(n,s,o,a,h){e.subVectors(s,n),i.subVectors(o,n),r.crossVectors(e,i);var c,l=this.direction.dot(r);if(l>0){if(a)return null;c=1}else{if(!(0>l))return null;c=-1,l=-l}t.subVectors(this.origin,n);var u=c*this.direction.dot(i.crossVectors(t,i));if(0>u)return null;var p=c*this.direction.dot(e.cross(t));if(0>p)return null;if(u+p>l)return null;var E=-c*t.dot(r);return 0>E?null:this.at(E/l,h)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(t,e){this.center=void 0!==t?t:new THREE.Vector3,this.radius=void 0!==e?e:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new THREE.Box3;return function(e,i){var r=this.center;void 0!==i?r.copy(i):t.setFromPoints(e).center(r);for(var n=0,s=0,o=e.length;o>s;s++)n=Math.max(n,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(n),this}}(),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),r=e||new THREE.Vector3;return r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new THREE.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(t,e,i,r,n,s){this.planes=[void 0!==t?t:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==s?s:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(t,e,i,r,n,s){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(r),o[4].copy(n),o[5].copy(s),this},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],h=i[5],c=i[6],l=i[7],u=i[8],p=i[9],E=i[10],m=i[11],d=i[12],f=i[13],y=i[14],x=i[15];return e[0].setComponents(o-r,l-a,m-u,x-d).normalize(),e[1].setComponents(o+r,l+a,m+u,x+d).normalize(),e[2].setComponents(o+n,l+h,m+p,x+f).normalize(),e[3].setComponents(o-n,l-h,m-p,x-f).normalize(),e[4].setComponents(o-s,l-c,m-E,x-y).normalize(),e[5].setComponents(o+s,l+c,m+E,x+y).normalize(),this},intersectsObject:function(){var t=new THREE.Sphere;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere),t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,r=-t.radius,n=0;6>n;n++){var s=e[n].distanceToPoint(i);if(r>s)return!1}return!0},intersectsBox:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){for(var r=this.planes,n=0;6>n;n++){var s=r[n];t.x=s.normal.x>0?i.min.x:i.max.x,e.x=s.normal.x>0?i.max.x:i.min.x,t.y=s.normal.y>0?i.min.y:i.max.y,e.y=s.normal.y>0?i.max.y:i.min.y,t.z=s.normal.z>0?i.min.z:i.max.z,e.z=s.normal.z>0?i.max.z:i.min.z;var o=s.distanceToPoint(t),a=s.distanceToPoint(e);if(0>o&&0>a)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(t,e){this.normal=void 0!==t?t:new THREE.Vector3(1,0,0),this.constant=void 0!==e?e:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i,r,n){var s=t.subVectors(n,r).cross(e.subVectors(i,r)).normalize();return this.setFromNormalAndCoplanarPoint(s,i),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t),r=e||new THREE.Vector3;return r.copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return 0>e&&i>0||0>i&&e>0},intersectLine:function(){var t=new THREE.Vector3;return function(e,i){var r=i||new THREE.Vector3,n=e.delta(t),s=this.normal.dot(n);if(0==s)return 0==this.distanceToPoint(e.start)?r.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/s;return 0>o||o>1?void 0:r.copy(n).multiplyScalar(o).add(e.start)}}(),coplanarPoint:function(t){var e=t||new THREE.Vector3;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Matrix3;return function(r,n){var s=n||i.getNormalMatrix(r),o=t.copy(this.normal).applyMatrix3(s),a=this.coplanarPoint(e);return a.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(o,a),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),r=0;return function(){for(var n=0;36>n;n++)8==n||13==n||18==n||23==n?i[n]="-":14==n?i[n]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,i[n]=e[19==n?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return e>t?e:t>i?i:t},clampBottom:function(t,e){return e>t?e:t},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},smoothstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},sign:function(t){return 0>t?-1:t>0?1:0},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(t){t.addEventListener=THREE.EventDispatcher.prototype.addEventListener,t.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,t.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent
},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)?!0:!1},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,r=i[t];if(void 0!==r){var n=r.indexOf(e);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;for(var r=[],n=i.length,s=0;n>s;s++)r[s]=i[s];for(var s=0;n>s;s++)r[s].call(this,t)}}}},function(t){t.Raycaster=function(e,i,r,n){this.ray=new t.Ray(e,i),this.near=r||0,this.far=n||1/0};var e=new t.Sphere,i=new t.Ray,r=(new t.Plane,new t.Vector3,new t.Vector3),n=new t.Matrix4,s=function(t,e){return t.distance-e.distance},o=new t.Vector3,a=new t.Vector3,h=new t.Vector3,c=function(s,l,u){if(s instanceof t.Sprite){r.setFromMatrixPosition(s.matrixWorld);var p=l.ray.distanceToPoint(r);if(p>s.scale.x)return u;u.push({distance:p,point:s.position,face:null,object:s})}else if(s instanceof t.LOD){r.setFromMatrixPosition(s.matrixWorld);var p=l.ray.origin.distanceTo(r);c(s.getObjectForDistance(p),l,u)}else if(s instanceof t.Mesh){var E=s.geometry;if(null===E.boundingSphere&&E.computeBoundingSphere(),e.copy(E.boundingSphere),e.applyMatrix4(s.matrixWorld),l.ray.isIntersectionSphere(e)===!1)return u;if(n.getInverse(s.matrixWorld),i.copy(l.ray).applyMatrix4(n),null!==E.boundingBox&&i.isIntersectionBox(E.boundingBox)===!1)return u;if(E instanceof t.BufferGeometry){var m=s.material;if(void 0===m)return u;var d,f,y,x=E.attributes,v=l.precision;if(void 0!==x.index){var T=x.index.array,R=x.position.array,g=E.offsets;0===g.length&&(g=[{start:0,count:R.length,index:0}]);for(var w=0,H=g.length;H>w;++w)for(var M=g[w].start,b=g[w].count,z=g[w].index,S=M,_=M+b;_>S;S+=3){if(d=z+T[S],f=z+T[S+1],y=z+T[S+2],o.set(R[3*d],R[3*d+1],R[3*d+2]),a.set(R[3*f],R[3*f+1],R[3*f+2]),h.set(R[3*y],R[3*y+1],R[3*y+2]),m.side===t.BackSide)var C=i.intersectTriangle(h,a,o,!0);else var C=i.intersectTriangle(o,a,h,m.side!==t.DoubleSide);if(null!==C){C.applyMatrix4(s.matrixWorld);var p=l.ray.origin.distanceTo(C);v>p||p<l.near||p>l.far||u.push({distance:p,point:C,indices:[d,f,y],face:null,faceIndex:null,object:s})}}}else for(var g=E.offsets,R=x.position.array,S=0,_=x.position.array.length;_>S;S+=3){if(d=S,f=S+1,y=S+2,o.set(R[3*d],R[3*d+1],R[3*d+2]),a.set(R[3*f],R[3*f+1],R[3*f+2]),h.set(R[3*y],R[3*y+1],R[3*y+2]),m.side===t.BackSide)var C=i.intersectTriangle(h,a,o,!0);else var C=i.intersectTriangle(o,a,h,m.side!==t.DoubleSide);if(null!==C){C.applyMatrix4(s.matrixWorld);var p=l.ray.origin.distanceTo(C);v>p||p<l.near||p>l.far||u.push({distance:p,point:C,indices:[d,f,y],face:null,faceIndex:null,object:s})}}}else if(E instanceof t.Geometry)for(var d,f,y,V=s.material instanceof t.MeshFaceMaterial,j=V===!0?s.material.materials:null,v=l.precision,A=E.vertices,D=0,F=E.faces.length;F>D;D++){var O=E.faces[D],m=V===!0?j[O.materialIndex]:s.material;if(void 0!==m){if(d=A[O.a],f=A[O.b],y=A[O.c],m.morphTargets===!0){var P=E.morphTargets,L=s.morphTargetInfluences;o.set(0,0,0),a.set(0,0,0),h.set(0,0,0);for(var B=0,N=P.length;N>B;B++){var k=L[B];if(0!==k){var U=P[B].vertices;o.x+=(U[O.a].x-d.x)*k,o.y+=(U[O.a].y-d.y)*k,o.z+=(U[O.a].z-d.z)*k,a.x+=(U[O.b].x-f.x)*k,a.y+=(U[O.b].y-f.y)*k,a.z+=(U[O.b].z-f.z)*k,h.x+=(U[O.c].x-y.x)*k,h.y+=(U[O.c].y-y.y)*k,h.z+=(U[O.c].z-y.z)*k}}o.add(d),a.add(f),h.add(y),d=o,f=a,y=h}if(m.side===t.BackSide)var C=i.intersectTriangle(y,f,d,!0);else var C=i.intersectTriangle(d,f,y,m.side!==t.DoubleSide);if(null!==C){C.applyMatrix4(s.matrixWorld);var p=l.ray.origin.distanceTo(C);v>p||p<l.near||p>l.far||u.push({distance:p,point:C,face:O,faceIndex:D,object:s})}}}}else if(s instanceof t.Line){var v=l.linePrecision,q=v*v,E=s.geometry;if(null===E.boundingSphere&&E.computeBoundingSphere(),e.copy(E.boundingSphere),e.applyMatrix4(s.matrixWorld),l.ray.isIntersectionSphere(e)===!1)return u;if(n.getInverse(s.matrixWorld),i.copy(l.ray).applyMatrix4(n),E instanceof t.Geometry)for(var A=E.vertices,I=A.length,W=new t.Vector3,G=new t.Vector3,Z=s.type===t.LineStrip?1:2,S=0;I-1>S;S+=Z){var X=i.distanceSqToSegment(A[S],A[S+1],G,W);if(!(X>q)){var p=i.origin.distanceTo(G);p<l.near||p>l.far||u.push({distance:p,point:W.clone().applyMatrix4(s.matrixWorld),face:null,faceIndex:null,object:s})}}}},l=function(t,e,i){for(var r=t.getDescendants(),n=0,s=r.length;s>n;n++)c(r[n],e,i)};t.Raycaster.prototype.precision=1e-4,t.Raycaster.prototype.linePrecision=1,t.Raycaster.prototype.set=function(t,e){this.ray.set(t,e)},t.Raycaster.prototype.intersectObject=function(t,e){var i=[];return e===!0&&l(t,this,i),c(t,this,i),i.sort(s),i},t.Raycaster.prototype.intersectObjects=function(t,e){for(var i=[],r=0,n=t.length;n>r;r++)c(t[r],this,i),e===!0&&l(t[r],this,i);return i.sort(s),i}}(THREE),THREE.Object3D=function(){this.id=THREE.Object3DIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3;var t=this;Object.defineProperties(this,{rotation:{enumerable:!0,value:(new THREE.Euler).onChange(function(){t.quaternion.setFromEuler(t.rotation,!1)})},quaternion:{enumerable:!0,value:(new THREE.Quaternion).onChange(function(){t.rotation.setFromQuaternion(t.quaternion,void 0,!1)})},scale:{enumerable:!0,value:new THREE.Vector3(1,1,1)}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order},set eulerOrder(t){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order=t},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(t){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new THREE.Quaternion;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new THREE.Vector3;return function(e,i){return t.copy(e),t.applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translate:function(t,e){return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."),this.translateOnAxis(e,t)},translateX:function(){var t=new THREE.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new THREE.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new THREE.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new THREE.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new THREE.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(t===this)return void console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");if(t instanceof THREE.Object3D){void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t);for(var e=this;void 0!==e.parent;)e=e.parent;void 0!==e&&e instanceof THREE.Scene&&e.__addObject(t)}},remove:function(t){var e=this.children.indexOf(t);if(-1!==e){t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(e,1);for(var i=this;void 0!==i.parent;)i=i.parent;void 0!==i&&i instanceof THREE.Scene&&i.__removeObject(t)}},traverse:function(t){t(this);for(var e=0,i=this.children.length;i>e;e++)this.children[e].traverse(t)},getObjectById:function(t,e){for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i];if(n.id===t)return n;if(e===!0&&(n=n.getObjectById(t,e),void 0!==n))return n}return void 0},getObjectByName:function(t,e){for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i];if(n.name===t)return n;if(e===!0&&(n=n.getObjectByName(t,e),void 0!==n))return n}return void 0},getChildByName:function(t,e){return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t,e)},getDescendants:function(t){void 0===t&&(t=[]),Array.prototype.push.apply(t,this.children);for(var e=0,i=this.children.length;i>e;e++)this.children[e].getDescendants(t);return t},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||t===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,i=this.children.length;i>e;e++)this.children[e].updateMatrixWorld(t)},clone:function(t,e){if(void 0===t&&(t=new THREE.Object3D),void 0===e&&(e=!0),t.name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.quaternion.copy(this.quaternion),t.scale.copy(this.scale),t.renderDepth=this.renderDepth,t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.visible=this.visible,t.castShadow=this.castShadow,t.receiveShadow=this.receiveShadow,t.frustumCulled=this.frustumCulled,t.userData=JSON.parse(JSON.stringify(this.userData)),e===!0)for(var i=0;i<this.children.length;i++){var r=this.children[i];t.add(r.clone())}return t}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){function t(){if(h===v){var t=new THREE.RenderableObject;return x.push(t),v++,h++,t}return x[h++]}function e(){if(l===R){var t=new THREE.RenderableVertex;return T.push(t),R++,l++,t}return T[l++]}function i(){if(p===w){var t=new THREE.RenderableFace;return g.push(t),w++,p++,t}return g[p++]}function r(){if(m===M){var t=new THREE.RenderableLine;return H.push(t),M++,m++,t}return H[m++]}function n(){if(f===z){var t=new THREE.RenderableSprite;return b.push(t),z++,f++,t}return b[f++]}function s(t,e){return t.z!==e.z?e.z-t.z:t.id!==e.id?t.id-e.id:0}function o(t,e){var i=0,r=1,n=t.z+t.w,s=e.z+e.w,o=-t.z+t.w,a=-e.z+e.w;return n>=0&&s>=0&&o>=0&&a>=0?!0:0>n&&0>s||0>o&&0>a?!1:(0>n?i=Math.max(i,n/(n-s)):0>s&&(r=Math.min(r,n/(n-s))),0>o?i=Math.max(i,o/(o-a)):0>a&&(r=Math.min(r,o/(o-a))),i>r?!1:(t.lerp(e,i),e.lerp(t,1-r),!0))}var a,h,c,l,u,p,E,m,d,f,y,x=[],v=0,T=[],R=0,g=[],w=0,H=[],M=0,b=[],z=0,S={objects:[],lights:[],elements:[]},_=new THREE.Vector3,C=new THREE.Vector3,V=new THREE.Vector3,j=new THREE.Vector3,A=new THREE.Vector4,D=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),F=new THREE.Box3,O=new Array(3),P=(new Array(4),new THREE.Matrix4),L=new THREE.Matrix4,B=new THREE.Matrix4,N=new THREE.Matrix3,k=new THREE.Frustum,U=new THREE.Vector4,q=new THREE.Vector4;this.projectVector=function(t,e){return e.matrixWorldInverse.getInverse(e.matrixWorld),L.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),t.applyProjection(L)},this.unprojectVector=function(){var t=new THREE.Matrix4;return function(e,i){return t.getInverse(i.projectionMatrix),L.multiplyMatrices(i.matrixWorld,t),e.applyProjection(L)}}(),this.pickingRay=function(t,e){t.z=-1;var i=new THREE.Vector3(t.x,t.y,1);return this.unprojectVector(t,e),this.unprojectVector(i,e),i.sub(t).normalize(),new THREE.Raycaster(t,i)};var I=function(e){if(e.visible!==!1){e instanceof THREE.Light?S.lights.push(e):(e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.Sprite)&&(e.frustumCulled===!1||k.intersectsObject(e)===!0)&&(a=t(),a.id=e.id,a.object=e,null!==e.renderDepth?a.z=e.renderDepth:(j.setFromMatrixPosition(e.matrixWorld),j.applyProjection(L),a.z=j.z),S.objects.push(a));for(var i=0,r=e.children.length;r>i;i++)I(e.children[i])}},W=function(t,e){h=0,S.objects.length=0,S.lights.length=0,I(t),e===!0&&S.objects.sort(s)},G=function(){var t=[],n=[],s=null,o=null,a=new THREE.Matrix3,h=function(e){s=e,o=s.material,a.getNormalMatrix(s.matrixWorld),t.length=0,n.length=0},l=function(t){var e=t.position,i=t.positionWorld,r=t.positionScreen;i.copy(e).applyMatrix4(y),r.copy(i).applyMatrix4(L);var n=1/r.w;r.x*=n,r.y*=n,r.z*=n,t.visible=r.x>=-1&&r.x<=1&&r.y>=-1&&r.y<=1&&r.z>=-1&&r.z<=1},p=function(t,i,r){c=e(),c.position.set(t,i,r),l(c)},m=function(e,i,r){t.push(e,i,r)},d=function(t,e){n.push(t,e)},f=function(t,e,i){return t.visible===!0||e.visible===!0||i.visible===!0?!0:(O[0]=t.positionScreen,O[1]=e.positionScreen,O[2]=i.positionScreen,D.isIntersectionBox(F.setFromPoints(O)))},x=function(t,e,i){return(i.positionScreen.x-t.positionScreen.x)*(e.positionScreen.y-t.positionScreen.y)-(i.positionScreen.y-t.positionScreen.y)*(e.positionScreen.x-t.positionScreen.x)<0},v=function(t,e){var i=T[t],n=T[e];E=r(),E.id=s.id,E.v1.copy(i),E.v2.copy(n),E.z=(i.positionScreen.z+n.positionScreen.z)/2,E.material=s.material,S.elements.push(E)},R=function(e,r,h){var c=T[e],l=T[r],p=T[h];if(f(c,l,p)!==!1&&(o.side===THREE.DoubleSide||x(c,l,p)===!0)){u=i(),u.id=s.id,u.v1.copy(c),u.v2.copy(l),u.v3.copy(p),u.z=(c.positionScreen.z+l.positionScreen.z+p.positionScreen.z)/3;for(var E=0;3>E;E++){var m=3*arguments[E],d=u.vertexNormalsModel[E];d.set(t[m],t[m+1],t[m+2]),d.applyMatrix3(a).normalize();var y=2*arguments[E],v=u.uvs[E];v.set(n[y],n[y+1])}u.vertexNormalsLength=3,u.material=s.material,S.elements.push(u)}};return{setObject:h,projectVertex:l,checkTriangleVisibility:f,checkBackfaceCulling:x,pushVertex:p,pushNormal:m,pushUv:d,pushLine:v,pushTriangle:R}},Z=new G;this.projectScene=function(t,a,h,c){var x,v,R,g,w,H,M,b,z;p=0,m=0,f=0,S.elements.length=0,t.autoUpdate===!0&&t.updateMatrixWorld(),void 0===a.parent&&a.updateMatrixWorld(),P.copy(a.matrixWorldInverse.getInverse(a.matrixWorld)),L.multiplyMatrices(a.projectionMatrix,P),k.setFromMatrix(L),W(t,h);for(var j=0,D=S.objects.length;D>j;j++)if(x=S.objects[j].object,v=x.geometry,Z.setObject(x),y=x.matrixWorld,l=0,x instanceof THREE.Mesh){if(v instanceof THREE.BufferGeometry){var F=v.attributes,O=v.offsets;if(void 0===F.position)continue;for(var I=F.position.array,G=0,X=I.length;X>G;G+=3)Z.pushVertex(I[G],I[G+1],I[G+2]);if(void 0!==F.normal)for(var Y=F.normal.array,G=0,X=Y.length;X>G;G+=3)Z.pushNormal(Y[G],Y[G+1],Y[G+2]);if(void 0!==F.uv)for(var Q=F.uv.array,G=0,X=Q.length;X>G;G+=2)Z.pushUv(Q[G],Q[G+1]);if(void 0!==F.index){var $=F.index.array;if(O.length>0)for(var j=0;j<O.length;j++)for(var J=O[j],K=J.index,G=J.start,X=J.start+J.count;X>G;G+=3)Z.pushTriangle($[G]+K,$[G+1]+K,$[G+2]+K);else for(var G=0,X=$.length;X>G;G+=3)Z.pushTriangle($[G],$[G+1],$[G+2])}else for(var G=0,X=I.length/3;X>G;G+=3)Z.pushTriangle(G,G+1,G+2)}else if(v instanceof THREE.Geometry){R=v.vertices,g=v.faces,M=v.faceVertexUvs[0],N.getNormalMatrix(y),b=x.material instanceof THREE.MeshFaceMaterial,z=b===!0?x.material:null;for(var te=0,ee=R.length;ee>te;te++){var ie=R[te];Z.pushVertex(ie.x,ie.y,ie.z)}for(var re=0,ne=g.length;ne>re;re++){w=g[re];var se=b===!0?z.materials[w.materialIndex]:x.material;if(void 0!==se){var oe=se.side,ae=T[w.a],he=T[w.b],ce=T[w.c];if(se.morphTargets===!0){var le=v.morphTargets,ue=x.morphTargetInfluences,pe=ae.position,Ee=he.position,me=ce.position;_.set(0,0,0),C.set(0,0,0),V.set(0,0,0);for(var de=0,fe=le.length;fe>de;de++){var ye=ue[de];if(0!==ye){var xe=le[de].vertices;_.x+=(xe[w.a].x-pe.x)*ye,_.y+=(xe[w.a].y-pe.y)*ye,_.z+=(xe[w.a].z-pe.z)*ye,C.x+=(xe[w.b].x-Ee.x)*ye,C.y+=(xe[w.b].y-Ee.y)*ye,C.z+=(xe[w.b].z-Ee.z)*ye,V.x+=(xe[w.c].x-me.x)*ye,V.y+=(xe[w.c].y-me.y)*ye,V.z+=(xe[w.c].z-me.z)*ye}}ae.position.add(_),he.position.add(C),ce.position.add(V),Z.projectVertex(ae),Z.projectVertex(he),Z.projectVertex(ce)}if(Z.checkTriangleVisibility(ae,he,ce)!==!1){var ve=Z.checkBackfaceCulling(ae,he,ce);if(oe!==THREE.DoubleSide){if(oe===THREE.FrontSide&&ve===!1)continue;if(oe===THREE.BackSide&&ve===!0)continue}u=i(),u.id=x.id,u.v1.copy(ae),u.v2.copy(he),u.v3.copy(ce),u.normalModel.copy(w.normal),ve!==!1||oe!==THREE.BackSide&&oe!==THREE.DoubleSide||u.normalModel.negate(),u.normalModel.applyMatrix3(N).normalize(),H=w.vertexNormals;for(var Te=0,Re=Math.min(H.length,3);Re>Te;Te++){var ge=u.vertexNormalsModel[Te];ge.copy(H[Te]),ve!==!1||oe!==THREE.BackSide&&oe!==THREE.DoubleSide||ge.negate(),ge.applyMatrix3(N).normalize()}u.vertexNormalsLength=H.length;var we=M[re];if(void 0!==we)for(var He=0;3>He;He++)u.uvs[He].copy(we[He]);u.color=w.color,u.material=se,u.z=(ae.positionScreen.z+he.positionScreen.z+ce.positionScreen.z)/3,S.elements.push(u)}}}}}else if(x instanceof THREE.Line){if(v instanceof THREE.BufferGeometry){var F=v.attributes;if(void 0!==F.position){for(var I=F.position.array,G=0,X=I.length;X>G;G+=3)Z.pushVertex(I[G],I[G+1],I[G+2]);if(void 0!==F.index)for(var $=F.index.array,G=0,X=$.length;X>G;G+=2)Z.pushLine($[G],$[G+1]);else for(var G=0,X=I.length/3-1;X>G;G++)Z.pushLine(G,G+1)}}else if(v instanceof THREE.Geometry){if(B.multiplyMatrices(L,y),R=x.geometry.vertices,0===R.length)continue;ae=e(),ae.positionScreen.copy(R[0]).applyMatrix4(B);for(var Me=x.type===THREE.LinePieces?2:1,te=1,ee=R.length;ee>te;te++)ae=e(),ae.positionScreen.copy(R[te]).applyMatrix4(B),(te+1)%Me>0||(he=T[l-2],U.copy(ae.positionScreen),q.copy(he.positionScreen),o(U,q)===!0&&(U.multiplyScalar(1/U.w),q.multiplyScalar(1/q.w),E=r(),E.id=x.id,E.v1.positionScreen.copy(U),E.v2.positionScreen.copy(q),E.z=Math.max(U.z,q.z),E.material=x.material,x.material.vertexColors===THREE.VertexColors&&(E.vertexColors[0].copy(x.geometry.colors[te]),E.vertexColors[1].copy(x.geometry.colors[te-1])),S.elements.push(E)))}}else if(x instanceof THREE.Sprite){A.set(y.elements[12],y.elements[13],y.elements[14],1),A.applyMatrix4(L);var be=1/A.w;A.z*=be,A.z>=-1&&A.z<=1&&(d=n(),d.id=x.id,d.x=A.x*be,d.y=A.y*be,d.z=A.z,d.object=x,d.rotation=x.rotation,d.scale.x=x.scale.x*Math.abs(d.x-(A.x+a.projectionMatrix.elements[0])/(A.w+a.projectionMatrix.elements[12])),d.scale.y=x.scale.y*Math.abs(d.y-(A.y+a.projectionMatrix.elements[5])/(A.w+a.projectionMatrix.elements[13])),d.material=x.material,S.elements.push(d))}return c===!0&&S.elements.sort(s),S}},THREE.Face3=function(t,e,i,r,n,s){this.a=t,this.b=e,this.c=i,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=n instanceof THREE.Color?n:new THREE.Color,this.vertexColors=n instanceof Array?n:[],this.vertexTangents=[],this.materialIndex=void 0!==s?s:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var t=new THREE.Face3(this.a,this.b,this.c);t.normal.copy(this.normal),t.color.copy(this.color),t.materialIndex=this.materialIndex;var e,i;for(e=0,i=this.vertexNormals.length;i>e;e++)t.vertexNormals[e]=this.vertexNormals[e].clone();for(e=0,i=this.vertexColors.length;i>e;e++)t.vertexColors[e]=this.vertexColors[e].clone();for(e=0,i=this.vertexTangents.length;i>e;e++)t.vertexTangents[e]=this.vertexTangents[e].clone();return t}},THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.attributes={},this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(t,e){return e instanceof THREE.BufferAttribute==!1?(console.warn("DEPRECATED: BufferGeometry's addAttribute() now expects ( name, attribute )."),void(this.attributes[t]={array:arguments[1],itemSize:arguments[2]})):void(this.attributes[t]=e)},getAttribute:function(t){return this.attributes[t]},addDrawCall:function(t,e,i){this.drawcalls.push({start:t,count:e,index:void 0!==i?i:0})},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var r=(new THREE.Matrix3).getNormalMatrix(t);r.applyToVector3Array(i.array),i.needsUpdate=!0}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.attributes.position.array;if(t){var e=this.boundingBox;t.length>=3&&(e.min.x=e.max.x=t[0],e.min.y=e.max.y=t[1],e.min.z=e.max.z=t[2]);for(var i=3,r=t.length;r>i;i+=3){var n=t[i],s=t[i+1],o=t[i+2];n<e.min.x?e.min.x=n:n>e.max.x&&(e.max.x=n),s<e.min.y?e.min.y=s:s>e.max.y&&(e.max.y=s),o<e.min.z?e.min.z=o:o>e.max.z&&(e.max.z=o)}}(void 0===t||0===t.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0))},computeBoundingSphere:function(){var t=new THREE.Box3,e=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var i=this.attributes.position.array;if(i){t.makeEmpty();for(var r=this.boundingSphere.center,n=0,s=i.length;s>n;n+=3)e.set(i[n],i[n+1],i[n+2]),t.addPoint(e);t.center(r);for(var o=0,n=0,s=i.length;s>n;n+=3)e.set(i[n],i[n+1],i[n+2]),o=Math.max(o,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(o)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var t,e,i,r,n=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(n)};else for(t=0,e=this.attributes.normal.array.length;e>t;t++)this.attributes.normal.array[t]=0;var s,o,a,h,c,l,u=this.attributes.position.array,p=this.attributes.normal.array,E=new THREE.Vector3,m=new THREE.Vector3,d=new THREE.Vector3,f=new THREE.Vector3,y=new THREE.Vector3;if(this.attributes.index){var x=this.attributes.index.array,v=this.offsets.length>0?this.offsets:[{start:0,count:x.length,index:0}];for(i=0,r=v.length;r>i;++i){var T=v[i].start,R=v[i].count,g=v[i].index;for(t=T,e=T+R;e>t;t+=3)s=g+x[t],o=g+x[t+1],a=g+x[t+2],h=u[3*s],c=u[3*s+1],l=u[3*s+2],E.set(h,c,l),h=u[3*o],c=u[3*o+1],l=u[3*o+2],m.set(h,c,l),h=u[3*a],c=u[3*a+1],l=u[3*a+2],d.set(h,c,l),f.subVectors(d,m),y.subVectors(E,m),f.cross(y),p[3*s]+=f.x,p[3*s+1]+=f.y,p[3*s+2]+=f.z,p[3*o]+=f.x,p[3*o+1]+=f.y,p[3*o+2]+=f.z,p[3*a]+=f.x,p[3*a+1]+=f.y,p[3*a+2]+=f.z}}else for(t=0,e=u.length;e>t;t+=9)h=u[t],c=u[t+1],l=u[t+2],E.set(h,c,l),h=u[t+3],c=u[t+4],l=u[t+5],m.set(h,c,l),h=u[t+6],c=u[t+7],l=u[t+8],d.set(h,c,l),f.subVectors(d,m),y.subVectors(E,m),f.cross(y),p[t]=f.x,p[t+1]=f.y,p[t+2]=f.z,p[t+3]=f.x,p[t+4]=f.y,p[t+5]=f.z,p[t+6]=f.x,p[t+7]=f.y,p[t+8]=f.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},computeTangents:function(){function t(t,e,i){p=r[3*t],E=r[3*t+1],m=r[3*t+2],d=r[3*e],f=r[3*e+1],y=r[3*e+2],x=r[3*i],v=r[3*i+1],T=r[3*i+2],R=s[2*t],g=s[2*t+1],w=s[2*e],H=s[2*e+1],M=s[2*i],b=s[2*i+1],z=d-p,S=x-p,_=f-E,C=v-E,V=y-m,j=T-m,A=w-R,D=M-R,F=H-g,O=b-g,P=1/(A*O-D*F),W.set((O*z-F*S)*P,(O*_-F*C)*P,(O*V-F*j)*P),G.set((A*S-D*z)*P,(A*C-D*_)*P,(A*j-D*V)*P),c[t].add(W),c[e].add(W),c[i].add(W),l[t].add(G),l[e].add(G),l[i].add(G)}function e(t){ie.x=n[3*t],ie.y=n[3*t+1],ie.z=n[3*t+2],re.copy(ie),J=c[t],te.copy(J),te.sub(ie.multiplyScalar(ie.dot(J))).normalize(),ee.crossVectors(re,J),K=ee.dot(l[t]),$=0>K?-1:1,h[4*t]=te.x,h[4*t+1]=te.y,h[4*t+2]=te.z,h[4*t+3]=$}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var i=this.attributes.index.array,r=this.attributes.position.array,n=this.attributes.normal.array,s=this.attributes.uv.array,o=r.length/3;if(void 0===this.attributes.tangent){var a=4*o;this.attributes.tangent={itemSize:4,array:new Float32Array(a)}}for(var h=this.attributes.tangent.array,c=[],l=[],u=0;o>u;u++)c[u]=new THREE.Vector3,l[u]=new THREE.Vector3;var p,E,m,d,f,y,x,v,T,R,g,w,H,M,b,z,S,_,C,V,j,A,D,F,O,P,L,B,N,k,U,q,I,W=new THREE.Vector3,G=new THREE.Vector3,Z=this.offsets;for(N=0,k=Z.length;k>N;++N){var X=Z[N].start,Y=Z[N].count,Q=Z[N].index;for(L=X,B=X+Y;B>L;L+=3)U=Q+i[L],q=Q+i[L+1],I=Q+i[L+2],t(U,q,I)}var $,J,K,te=new THREE.Vector3,ee=new THREE.Vector3,ie=new THREE.Vector3,re=new THREE.Vector3;for(N=0,k=Z.length;k>N;++N){var X=Z[N].start,Y=Z[N].count,Q=Z[N].index;for(L=X,B=X+Y;B>L;L+=3)U=Q+i[L],q=Q+i[L+1],I=Q+i[L+2],e(U),e(q),e(I)}},computeOffsets:function(t){var e=t;void 0===t&&(e=65535);for(var i=(Date.now(),this.attributes.index.array),r=this.attributes.position.array,n=(r.length/3,i.length/3),s=new Uint16Array(i.length),o=0,a=0,h=[{start:0,count:0,index:0}],c=h[0],l=0,u=0,p=new Int32Array(6),E=new Int32Array(r.length),m=new Int32Array(r.length),d=0;d<r.length;d++)E[d]=-1,m[d]=-1;for(var f=0;n>f;f++){u=0;for(var y=0;3>y;y++){var x=i[3*f+y];-1==E[x]?(p[2*y]=x,p[2*y+1]=-1,u++):E[x]<c.index?(p[2*y]=x,p[2*y+1]=-1,l++):(p[2*y]=x,p[2*y+1]=E[x])}var v=a+u;if(v>c.index+e){var T={start:o,count:0,index:a};h.push(T),c=T;for(var R=0;6>R;R+=2){var g=p[R+1];g>-1&&g<c.index&&(p[R+1]=-1)}}for(var R=0;6>R;R+=2){var x=p[R],g=p[R+1];-1===g&&(g=a++),E[x]=g,m[g]=x,s[o++]=g-c.index,c.count++}}return this.reorderBuffers(s,m,a),this.offsets=h,h},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var t,e,i,r,n=this.attributes.normal.array,s=0,o=n.length;o>s;s+=3)t=n[s],e=n[s+1],i=n[s+2],r=1/Math.sqrt(t*t+e*e+i*i),n[s]*=r,n[s+1]*=r,n[s+2]*=r},reorderBuffers:function(t,e,i){var r={},n=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var s in this.attributes)if("index"!=s)for(var o=this.attributes[s].array,a=0,h=n.length;h>a;a++){var c=n[a];if(o instanceof c){r[s]=new c(this.attributes[s].itemSize*i);break}}for(var l=0;i>l;l++){var u=e[l];for(var s in this.attributes)if("index"!=s)for(var p=this.attributes[s].array,E=this.attributes[s].itemSize,m=r[s],d=0;E>d;d++)m[l*E+d]=p[u*E+d]}this.attributes.index.array=t;for(var s in this.attributes)"index"!=s&&(this.attributes[s].array=r[s],this.attributes[s].numItems=this.attributes[s].itemSize*i)},clone:function(){var t=new THREE.BufferGeometry,e=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var i in this.attributes){for(var r=this.attributes[i],n=r.array,s={itemSize:r.itemSize,array:null},o=0,a=e.length;a>o;o++){var h=e[o];if(n instanceof h){s.array=new h(n);break}}t.attributes[i]=s}for(var o=0,a=this.offsets.length;a>o;o++){var c=this.offsets[o];t.offsets.push({start:c.start,index:c.index,count:c.count})}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.buffersNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(t){for(var e=(new THREE.Matrix3).getNormalMatrix(t),i=0,r=this.vertices.length;r>i;i++){var n=this.vertices[i];n.applyMatrix4(t)}for(var i=0,r=this.faces.length;r>i;i++){var s=this.faces[i];s.normal.applyMatrix3(e).normalize();for(var o=0,a=s.vertexNormals.length;a>o;o++)s.vertexNormals[o].applyMatrix3(e).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},computeFaceNormals:function(){for(var t=new THREE.Vector3,e=new THREE.Vector3,i=0,r=this.faces.length;r>i;i++){var n=this.faces[i],s=this.vertices[n.a],o=this.vertices[n.b],a=this.vertices[n.c];t.subVectors(a,o),e.subVectors(s,o),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){var e,i,r,n,s,o;for(o=new Array(this.vertices.length),e=0,i=this.vertices.length;i>e;e++)o[e]=new THREE.Vector3;if(t){{var a,h,c,l=new THREE.Vector3,u=new THREE.Vector3;new THREE.Vector3,new THREE.Vector3,new THREE.Vector3}for(r=0,n=this.faces.length;n>r;r++)s=this.faces[r],a=this.vertices[s.a],h=this.vertices[s.b],c=this.vertices[s.c],l.subVectors(c,h),u.subVectors(a,h),l.cross(u),o[s.a].add(l),o[s.b].add(l),o[s.c].add(l)}else for(r=0,n=this.faces.length;n>r;r++)s=this.faces[r],o[s.a].add(s.normal),o[s.b].add(s.normal),o[s.c].add(s.normal);for(e=0,i=this.vertices.length;i>e;e++)o[e].normalize();for(r=0,n=this.faces.length;n>r;r++)s=this.faces[r],s.vertexNormals[0]=o[s.a].clone(),s.vertexNormals[1]=o[s.b].clone(),s.vertexNormals[2]=o[s.c].clone()},computeMorphNormals:function(){var t,e,i,r,n;for(i=0,r=this.faces.length;r>i;i++)for(n=this.faces[i],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),t=0,e=n.vertexNormals.length;e>t;t++)n.__originalVertexNormals[t]?n.__originalVertexNormals[t].copy(n.vertexNormals[t]):n.__originalVertexNormals[t]=n.vertexNormals[t].clone();var s=new THREE.Geometry;for(s.faces=this.faces,t=0,e=this.morphTargets.length;e>t;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o,a,h=this.morphNormals[t].faceNormals,c=this.morphNormals[t].vertexNormals;for(i=0,r=this.faces.length;r>i;i++)o=new THREE.Vector3,a={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},h.push(o),c.push(a)}var l=this.morphNormals[t];s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals();var o,a;for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],o=l.faceNormals[i],a=l.vertexNormals[i],o.copy(n.normal),a.a.copy(n.vertexNormals[0]),a.b.copy(n.vertexNormals[1]),a.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){function t(t,e,i,r,n,s,o){c=t.vertices[e],l=t.vertices[i],u=t.vertices[r],p=h[n],E=h[s],m=h[o],d=l.x-c.x,f=u.x-c.x,y=l.y-c.y,x=u.y-c.y,v=l.z-c.z,T=u.z-c.z,R=E.x-p.x,g=m.x-p.x,w=E.y-p.y,H=m.y-p.y,M=1/(R*H-g*w),V.set((H*d-w*f)*M,(H*y-w*x)*M,(H*v-w*T)*M),j.set((R*f-g*d)*M,(R*x-g*y)*M,(R*T-g*v)*M),_[e].add(V),_[i].add(V),_[r].add(V),C[e].add(j),C[i].add(j),C[r].add(j)}var e,i,r,n,s,o,a,h,c,l,u,p,E,m,d,f,y,x,v,T,R,g,w,H,M,b,z,S,_=[],C=[],V=new THREE.Vector3,j=new THREE.Vector3,A=new THREE.Vector3,D=new THREE.Vector3,F=new THREE.Vector3;for(r=0,n=this.vertices.length;n>r;r++)_[r]=new THREE.Vector3,C[r]=new THREE.Vector3;for(e=0,i=this.faces.length;i>e;e++)a=this.faces[e],h=this.faceVertexUvs[0][e],t(this,a.a,a.b,a.c,0,1,2);
var O=["a","b","c","d"];for(e=0,i=this.faces.length;i>e;e++)for(a=this.faces[e],s=0;s<Math.min(a.vertexNormals.length,3);s++)F.copy(a.vertexNormals[s]),o=a[O[s]],b=_[o],A.copy(b),A.sub(F.multiplyScalar(F.dot(b))).normalize(),D.crossVectors(a.vertexNormals[s],b),z=D.dot(C[o]),S=0>z?-1:1,a.vertexTangents[s]=new THREE.Vector4(A.x,A.y,A.z,S);this.hasTangents=!0},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,r=e.length;r>i;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t instanceof THREE.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var r,n=this.vertices.length,s=(this.faceVertexUvs[0].length,this.vertices),o=t.vertices,a=this.faces,h=t.faces,c=this.faceVertexUvs[0],l=t.faceVertexUvs[0];void 0===i&&(i=0),void 0!==e&&(r=(new THREE.Matrix3).getNormalMatrix(e));for(var u=0,p=o.length;p>u;u++){var E=o[u],m=E.clone();void 0!==e&&m.applyMatrix4(e),s.push(m)}for(u=0,p=h.length;p>u;u++){var d,f,y,x=h[u],v=x.vertexNormals,T=x.vertexColors;d=new THREE.Face3(x.a+n,x.b+n,x.c+n),d.normal.copy(x.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize();for(var R=0,g=v.length;g>R;R++)f=v[R].clone(),void 0!==r&&f.applyMatrix3(r).normalize(),d.vertexNormals.push(f);d.color.copy(x.color);for(var R=0,g=T.length;g>R;R++)y=T[R],d.vertexColors.push(y.clone());d.materialIndex=x.materialIndex+i,a.push(d)}for(u=0,p=l.length;p>u;u++){var w=l[u],H=[];if(void 0!==w){for(var R=0,g=w.length;g>R;R++)H.push(new THREE.Vector2(w[R].x,w[R].y));c.push(H)}}},mergeVertices:function(){var t,e,i,r,n,s,o,a,h={},c=[],l=[],u=4,p=Math.pow(10,u);for(i=0,r=this.vertices.length;r>i;i++)t=this.vertices[i],e=Math.round(t.x*p)+"_"+Math.round(t.y*p)+"_"+Math.round(t.z*p),void 0===h[e]?(h[e]=i,c.push(this.vertices[i]),l[i]=c.length-1):l[i]=l[h[e]];var E=[];for(i=0,r=this.faces.length;r>i;i++){n=this.faces[i],n.a=l[n.a],n.b=l[n.b],n.c=l[n.c],s=[n.a,n.b,n.c];for(var m=-1,d=0;3>d;d++)if(s[d]==s[(d+1)%3]){m=d,E.push(i);break}}for(i=E.length-1;i>=0;i--){var f=E[i];for(this.faces.splice(f,1),o=0,a=this.faceVertexUvs.length;a>o;o++)this.faceVertexUvs[o].splice(f,1)}var y=this.vertices.length-c.length;return this.vertices=c,y},makeGroups:function(){var t=0;return function(e,i){var r,n,s,o,a,h={},c=this.morphTargets.length,l=this.morphNormals.length;for(this.geometryGroups={},r=0,n=this.faces.length;n>r;r++)s=this.faces[r],o=e?s.materialIndex:0,o in h||(h[o]={hash:o,counter:0}),a=h[o].hash+"_"+h[o].counter,a in this.geometryGroups||(this.geometryGroups[a]={faces3:[],materialIndex:o,vertices:0,numMorphTargets:c,numMorphNormals:l}),this.geometryGroups[a].vertices+3>i&&(h[o].counter+=1,a=h[o].hash+"_"+h[o].counter,a in this.geometryGroups||(this.geometryGroups[a]={faces3:[],materialIndex:o,vertices:0,numMorphTargets:c,numMorphNormals:l})),this.geometryGroups[a].faces3.push(r),this.geometryGroups[a].vertices+=3;this.geometryGroupsList=[];for(var u in this.geometryGroups)this.geometryGroups[u].id=t++,this.geometryGroupsList.push(this.geometryGroups[u])}}(),clone:function(){for(var t=new THREE.Geometry,e=this.vertices,i=0,r=e.length;r>i;i++)t.vertices.push(e[i].clone());for(var n=this.faces,i=0,r=n.length;r>i;i++)t.faces.push(n[i].clone());for(var s=this.faceVertexUvs[0],i=0,r=s.length;r>i;i++){for(var o=s[i],a=[],h=0,c=o.length;c>h;h++)a.push(new THREE.Vector2(o[h].x,o[h].y));t.faceVertexUvs[0].push(a)}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt=function(){var t=new THREE.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),THREE.Camera.prototype.clone=function(t){return void 0===t&&(t=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,t),t.matrixWorldInverse.copy(this.matrixWorldInverse),t.projectionMatrix.copy(this.projectionMatrix),t},THREE.OrthographicCamera=function(t,e,i,r,n,s){THREE.Camera.call(this),this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var t=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,t),t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t},THREE.Light=function(t){THREE.Object3D.call(this),this.color=new THREE.Color(t)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(t){return void 0===t&&(t=new THREE.Light),THREE.Object3D.prototype.clone.call(this,t),t.color.copy(this.color),t},THREE.AmbientLight=function(t){THREE.Light.call(this,t)},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var t=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,t),t},THREE.DirectionalLight=function(t,e){THREE.Light.call(this,t),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==e?e:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var t=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraLeft=this.shadowCameraLeft,t.shadowCameraRight=this.shadowCameraRight,t.shadowCameraTop=this.shadowCameraTop,t.shadowCameraBottom=this.shadowCameraBottom,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t.shadowCascade=this.shadowCascade,t.shadowCascadeOffset.copy(this.shadowCascadeOffset),t.shadowCascadeCount=this.shadowCascadeCount,t.shadowCascadeBias=this.shadowCascadeBias.slice(0),t.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),t.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),t.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),t.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),t},THREE.PointLight=function(t,e,i){THREE.Light.call(this,t),this.intensity=void 0!==e?e:1,this.distance=void 0!==i?i:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var t=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,t),t.intensity=this.intensity,t.distance=this.distance,t},THREE.Material=function(){this.id=THREE.MaterialIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){if(e in this){var r=this[e];r instanceof THREE.Color?r.set(i):r instanceof THREE.Vector3&&i instanceof THREE.Vector3?r.copy(i):this[e]="overdraw"==e?Number(i):i}}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},clone:function(t){return void 0===t&&(t=new THREE.Material),t.name=this.name,t.side=this.side,t.opacity=this.opacity,t.transparent=this.transparent,t.blending=this.blending,t.blendSrc=this.blendSrc,t.blendDst=this.blendDst,t.blendEquation=this.blendEquation,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.polygonOffset=this.polygonOffset,t.polygonOffsetFactor=this.polygonOffsetFactor,t.polygonOffsetUnits=this.polygonOffsetUnits,t.alphaTest=this.alphaTest,t.overdraw=this.overdraw,t.visible=this.visible,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.setValues(t)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var t=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.linecap=this.linecap,t.linejoin=this.linejoin,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.LineDashedMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(t)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var t=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.scale=this.scale,t.dashSize=this.dashSize,t.gapSize=this.gapSize,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.MeshBasicMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(t)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var t=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t},THREE.MeshLambertMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var t=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshPhongMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var t=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.specular.copy(this.specular),t.shininess=this.shininess,t.metal=this.metal,t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.bumpMap=this.bumpMap,t.bumpScale=this.bumpScale,t.normalMap=this.normalMap,t.normalScale.copy(this.normalScale),t.specularMap=this.specularMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},THREE.MeshDepthMaterial=function(t){THREE.Material.call(this),this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var t=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,t),t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshNormalMaterial=function(t){THREE.Material.call(this,t),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var t=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,t),t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},THREE.MeshFaceMaterial=function(t){this.materials=t instanceof Array?t:[]},THREE.MeshFaceMaterial.prototype.clone=function(){for(var t=new THREE.MeshFaceMaterial,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t},THREE.ParticleSystemMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=!1,this.fog=!0,this.setValues(t)},THREE.ParticleSystemMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleSystemMaterial.prototype.clone=function(){var t=new THREE.ParticleSystemMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.size=this.size,t.sizeAttenuation=this.sizeAttenuation,t.vertexColors=this.vertexColors,t.fog=this.fog,t},THREE.ParticleBasicMaterial=THREE.ParticleSystemMaterial,THREE.SpriteMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(t)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var t=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.rotation=this.rotation,t.fog=this.fog,t},THREE.SpriteCanvasMaterial=function(t){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(t)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.clone=function(){var t=new THREE.SpriteCanvasMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.program=this.program,t},THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial,THREE.Texture=function(t,e,i,r,n,s,o,a,h){this.id=THREE.TextureIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=void 0!==e?e:new THREE.UVMapping,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n?n:THREE.LinearFilter,this.minFilter=void 0!==s?s:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==h?h:1,this.format=void 0!==o?o:THREE.RGBAFormat,this.type=void 0!==a?a:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},clone:function(t){return void 0===t&&(t=new THREE.Texture),t.image=this.image,t.mipmaps=this.mipmaps.slice(0),t.mapping=this.mapping,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.format=this.format,t.type=this.type,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.generateMipmaps=this.generateMipmaps,t.premultiplyAlpha=this.premultiplyAlpha,t.flipY=this.flipY,t.unpackAlignment=this.unpackAlignment,t},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.DataTexture=function(t,e,i,r,n,s,o,a,h,c,l){THREE.Texture.call(this,null,s,o,a,h,c,r,n,l),this.image={data:t,width:e,height:i}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var t=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,t),t},THREE.Line=function(t,e,i){THREE.Object3D.call(this),this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==i?i:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.clone=function(t){return void 0===t&&(t=new THREE.Line(this.geometry,this.material,this.type)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Mesh=function(t,e){THREE.Object3D.call(this),this.geometry=void 0!==t?t:new THREE.Geometry,this.material=void 0!==e?e:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;e>t;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.clone=function(t,e){return void 0===t&&(t=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,t,e),t},THREE.Bone=function(t){THREE.Object3D.call(this),this.skin=t,this.skinMatrix=new THREE.Matrix4,this.accumulatedRotWeight=0,this.accumulatedPosWeight=0,this.accumulatedSclWeight=0},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update=function(t,e){this.matrixAutoUpdate&&(e|=this.updateMatrix()),(e||this.matrixWorldNeedsUpdate)&&(t?this.skinMatrix.multiplyMatrices(t,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0,this.accumulatedRotWeight=0,this.accumulatedPosWeight=0,this.accumulatedSclWeight=0);for(var i=0,r=this.children.length;r>i;i++)this.children[i].update(this.skinMatrix,e)},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=0;i<this.objects.length&&!(e<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:e,object:t}),this.add(t)},THREE.LOD.prototype.getObjectForDistance=function(t){for(var e=1,i=this.objects.length;i>e&&!(t<this.objects[e].distance);e++);return this.objects[e-1].object},THREE.LOD.prototype.update=function(){var t=new THREE.Vector3,e=new THREE.Vector3;return function(i){if(this.objects.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);this.objects[0].object.visible=!0;for(var n=1,s=this.objects.length;s>n&&r>=this.objects[n].distance;n++)this.objects[n-1].object.visible=!1,this.objects[n].object.visible=!0;for(;s>n;n++)this.objects[n].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(t){void 0===t&&(t=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,t);for(var e=0,i=this.objects.length;i>e;e++){var r=this.objects[e].object.clone();r.visible=0===e,t.addLevel(r,this.objects[e].distance)}return t},THREE.Sprite=function(){var t=new THREE.Float32Attribute(3,3);t.set([-.5,-.5,0,.5,-.5,0,.5,.5,0]);var e=new THREE.BufferGeometry;return e.addAttribute("position",t),function(t){THREE.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},THREE.Sprite.prototype.clone=function(t){return void 0===t&&(t=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,t),t},THREE.Particle=THREE.Sprite,THREE.Scene=function(){THREE.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject=function(t){if(t instanceof THREE.Light)-1===this.__lights.indexOf(t)&&this.__lights.push(t),t.target&&void 0===t.target.parent&&this.add(t.target);else if(!(t instanceof THREE.Camera||t instanceof THREE.Bone)){this.__objectsAdded.push(t);var e=this.__objectsRemoved.indexOf(t);-1!==e&&this.__objectsRemoved.splice(e,1)}this.dispatchEvent({type:"objectAdded",object:t}),t.dispatchEvent({type:"addedToScene",scene:this});for(var i=0;i<t.children.length;i++)this.__addObject(t.children[i])},THREE.Scene.prototype.__removeObject=function(t){if(t instanceof THREE.Light){var e=this.__lights.indexOf(t);if(-1!==e&&this.__lights.splice(e,1),t.shadowCascadeArray)for(var i=0;i<t.shadowCascadeArray.length;i++)this.__removeObject(t.shadowCascadeArray[i])}else if(!(t instanceof THREE.Camera)){this.__objectsRemoved.push(t);var e=this.__objectsAdded.indexOf(t);-1!==e&&this.__objectsAdded.splice(e,1)}this.dispatchEvent({type:"objectRemoved",object:t}),t.dispatchEvent({type:"removedFromScene",scene:this});for(var r=0;r<t.children.length;r++)this.__removeObject(t.children[r])},THREE.Scene.prototype.clone=function(t){return void 0===t&&(t=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,t),null!==this.fog&&(t.fog=this.fog.clone()),null!==this.overrideMaterial&&(t.overrideMaterial=this.overrideMaterial.clone()),t.autoUpdate=this.autoUpdate,t.matrixAutoUpdate=this.matrixAutoUpdate,t},THREE.CanvasRenderer=function(t){function e(){de.setRGB(0,0,0),fe.setRGB(0,0,0),ye.setRGB(0,0,0);for(var t=0,e=H.length;e>t;t++){var i=H[t],r=i.color;i instanceof THREE.AmbientLight?de.add(r):i instanceof THREE.DirectionalLight?fe.add(r):i instanceof THREE.PointLight&&ye.add(r)}}function i(t,e,i){for(var r=0,n=H.length;n>r;r++){var s=H[r];if(le.copy(s.color),s instanceof THREE.DirectionalLight){var o=xe.setFromMatrixPosition(s.matrixWorld).normalize(),a=e.dot(o);if(0>=a)continue;a*=s.intensity,i.add(le.multiplyScalar(a))}else if(s instanceof THREE.PointLight){var o=xe.setFromMatrixPosition(s.matrixWorld),a=e.dot(xe.subVectors(o,t).normalize());if(0>=a)continue;if(a*=0==s.distance?1:1-Math.min(t.distanceTo(o)/s.distance,1),0==a)continue;a*=s.intensity,i.add(le.multiplyScalar(a))}}}function r(t,e,i){E(i.opacity),m(i.blending);var r=e.scale.x*Z,n=e.scale.y*X,s=.5*Math.sqrt(r*r+n*n);if(me.min.set(t.x-s,t.y-s),me.max.set(t.x+s,t.y+s),i instanceof THREE.SpriteMaterial||i instanceof THREE.ParticleSystemMaterial){var o=i.map;if(null!==o){o.hasEventListener("update",c)===!1&&(void 0!==o.image&&o.image.width>0&&l(o),o.addEventListener("update",c));var a=ue[o.id];v(void 0!==a?a:"rgba( 0, 0, 0, 1 )");var h=o.image,u=h.width*o.offset.x,p=h.height*o.offset.y,d=h.width*o.repeat.x,f=h.height*o.repeat.y,y=r/d,T=n/f;Y.save(),Y.translate(t.x,t.y),0!==i.rotation&&Y.rotate(i.rotation),Y.translate(-r/2,-n/2),Y.scale(y,T),Y.translate(-u,-p),Y.fillRect(u,p,d,f),Y.restore()}else v(i.color.getStyle()),Y.save(),Y.translate(t.x,t.y),0!==i.rotation&&Y.rotate(i.rotation),Y.scale(r,-n),Y.fillRect(-.5,-.5,1,1),Y.restore()}else i instanceof THREE.SpriteCanvasMaterial&&(x(i.color.getStyle()),v(i.color.getStyle()),Y.save(),Y.translate(t.x,t.y),0!==i.rotation&&Y.rotate(i.rotation),Y.scale(r,n),i.program(Y),Y.restore())}function n(t,e,i,r){if(E(r.opacity),m(r.blending),Y.beginPath(),Y.moveTo(t.positionScreen.x,t.positionScreen.y),Y.lineTo(e.positionScreen.x,e.positionScreen.y),r instanceof THREE.LineBasicMaterial){if(d(r.linewidth),f(r.linecap),y(r.linejoin),r.vertexColors!==THREE.VertexColors)x(r.color.getStyle());else{var n=i.vertexColors[0].getStyle(),s=i.vertexColors[1].getStyle();if(n===s)x(n);else{try{var o=Y.createLinearGradient(t.positionScreen.x,t.positionScreen.y,e.positionScreen.x,e.positionScreen.y);o.addColorStop(0,n),o.addColorStop(1,s)}catch(a){o=n}x(o)}}Y.stroke(),me.expandByScalar(2*r.linewidth)}else r instanceof THREE.LineDashedMaterial&&(d(r.linewidth),f(r.linecap),y(r.linejoin),x(r.color.getStyle()),T(r.dashSize,r.gapSize),Y.stroke(),me.expandByScalar(2*r.linewidth),T(null,null))}function s(t,e,r,n,s,c,l,p){U.info.render.vertices+=3,U.info.render.faces++,E(p.opacity),m(p.blending),_=t.positionScreen.x,C=t.positionScreen.y,V=e.positionScreen.x,j=e.positionScreen.y,A=r.positionScreen.x,D=r.positionScreen.y,o(_,C,V,j,A,D),(p instanceof THREE.MeshLambertMaterial||p instanceof THREE.MeshPhongMaterial)&&null===p.map?(he.copy(p.color),ce.copy(p.emissive),p.vertexColors===THREE.FaceColors&&he.multiply(l.color),ae.copy(de),ve.copy(t.positionWorld).add(e.positionWorld).add(r.positionWorld).divideScalar(3),i(ve,l.normalModel,ae),ae.multiply(he).add(ce),p.wireframe===!0?a(ae,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):h(ae)):p instanceof THREE.MeshBasicMaterial||p instanceof THREE.MeshLambertMaterial||p instanceof THREE.MeshPhongMaterial?null!==p.map?p.map.mapping instanceof THREE.UVMapping&&(F=l.uvs,u(_,C,V,j,A,D,F[n].x,F[n].y,F[s].x,F[s].y,F[c].x,F[c].y,p.map)):null!==p.envMap?p.envMap.mapping instanceof THREE.SphericalReflectionMapping?(Te.copy(l.vertexNormalsModel[n]).applyMatrix3(Re),O=.5*Te.x+.5,P=.5*Te.y+.5,Te.copy(l.vertexNormalsModel[s]).applyMatrix3(Re),L=.5*Te.x+.5,B=.5*Te.y+.5,Te.copy(l.vertexNormalsModel[c]).applyMatrix3(Re),N=.5*Te.x+.5,k=.5*Te.y+.5,u(_,C,V,j,A,D,O,P,L,B,N,k,p.envMap)):p.envMap.mapping instanceof THREE.SphericalRefractionMapping&&(Te.copy(l.vertexNormalsModel[n]).applyMatrix3(Re),O=-.5*Te.x+.5,P=-.5*Te.y+.5,Te.copy(l.vertexNormalsModel[s]).applyMatrix3(Re),L=-.5*Te.x+.5,B=-.5*Te.y+.5,Te.copy(l.vertexNormalsModel[c]).applyMatrix3(Re),N=-.5*Te.x+.5,k=-.5*Te.y+.5,u(_,C,V,j,A,D,O,P,L,B,N,k,p.envMap)):(ae.copy(p.color),p.vertexColors===THREE.FaceColors&&ae.multiply(l.color),p.wireframe===!0?a(ae,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):h(ae)):p instanceof THREE.MeshDepthMaterial?(ae.r=ae.g=ae.b=1-R(t.positionScreen.z*t.positionScreen.w,M.near,M.far),p.wireframe===!0?a(ae,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):h(ae)):p instanceof THREE.MeshNormalMaterial?(Te.copy(l.normalModel).applyMatrix3(Re),ae.setRGB(Te.x,Te.y,Te.z).multiplyScalar(.5).addScalar(.5),p.wireframe===!0?a(ae,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):h(ae)):(ae.setRGB(1,1,1),p.wireframe===!0?a(ae,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):h(ae))}function o(t,e,i,r,n,s){Y.beginPath(),Y.moveTo(t,e),Y.lineTo(i,r),Y.lineTo(n,s),Y.closePath()}function a(t,e,i,r){d(e),f(i),y(r),x(t.getStyle()),Y.stroke(),me.expandByScalar(2*e)}function h(t){v(t.getStyle()),Y.fill()}function c(t){l(t.target)}function l(t){var e=t.wrapS===THREE.RepeatWrapping,i=t.wrapT===THREE.RepeatWrapping,r=t.image,n=document.createElement("canvas");n.width=r.width,n.height=r.height;var s=n.getContext("2d");s.setTransform(1,0,0,-1,0,r.height),s.drawImage(r,0,0),ue[t.id]=Y.createPattern(n,e===!0&&i===!0?"repeat":e===!0&&i===!1?"repeat-x":e===!1&&i===!0?"repeat-y":"no-repeat")}function u(t,e,i,r,n,s,o,a,h,u,p,E,m){if(!(m instanceof THREE.DataTexture)){m.hasEventListener("update",c)===!1&&(void 0!==m.image&&m.image.width>0&&l(m),m.addEventListener("update",c));var d=ue[m.id];if(void 0===d)return v("rgba(0,0,0,1)"),void Y.fill();v(d);var f,y,x,T,R,g,w,H,M=m.offset.x/m.repeat.x,b=m.offset.y/m.repeat.y,z=m.image.width*m.repeat.x,S=m.image.height*m.repeat.y;o=(o+M)*z,a=(a+b)*S,h=(h+M)*z,u=(u+b)*S,p=(p+M)*z,E=(E+b)*S,i-=t,r-=e,n-=t,s-=e,h-=o,u-=a,p-=o,E-=a,w=h*E-p*u,0!==w&&(H=1/w,f=(E*i-u*n)*H,y=(E*r-u*s)*H,x=(h*n-p*i)*H,T=(h*s-p*r)*H,R=t-f*o-x*a,g=e-y*o-T*a,Y.save(),Y.transform(f,y,x,T,R,g),Y.fill(),Y.restore())}}function p(t,e,i){var r,n=e.x-t.x,s=e.y-t.y,o=n*n+s*s;0!==o&&(r=i/Math.sqrt(o),n*=r,s*=r,e.x+=n,e.y+=s,t.x-=n,t.y-=s)}function E(t){J!==t&&(Y.globalAlpha=t,J=t)}function m(t){K!==t&&(t===THREE.NormalBlending?Y.globalCompositeOperation="source-over":t===THREE.AdditiveBlending?Y.globalCompositeOperation="lighter":t===THREE.SubtractiveBlending&&(Y.globalCompositeOperation="darker"),K=t)
}function d(t){ie!==t&&(Y.lineWidth=t,ie=t)}function f(t){re!==t&&(Y.lineCap=t,re=t)}function y(t){ne!==t&&(Y.lineJoin=t,ne=t)}function x(t){te!==t&&(Y.strokeStyle=t,te=t)}function v(t){ee!==t&&(Y.fillStyle=t,ee=t)}function T(t,e){(se!==t||oe!==e)&&(Y.setLineDash([t,e]),se=t,oe=e)}console.log("THREE.CanvasRenderer",THREE.REVISION);var R=THREE.Math.smoothstep;t=t||{};var g,w,H,M,b,z,S,_,C,V,j,A,D,F,O,P,L,B,N,k,U=this,q=new THREE.Projector,I=void 0!==t.canvas?t.canvas:document.createElement("canvas"),W=I.width,G=I.height,Z=Math.floor(W/2),X=Math.floor(G/2),Y=I.getContext("2d",{alpha:t.alpha===!0}),Q=new THREE.Color(0),$=0,J=1,K=0,te=null,ee=null,ie=null,re=null,ne=null,se=null,oe=0,ae=(new THREE.RenderableVertex,new THREE.RenderableVertex,new THREE.Color),he=(new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color),ce=new THREE.Color,le=new THREE.Color,ue={},pe=new THREE.Box2,Ee=new THREE.Box2,me=new THREE.Box2,de=new THREE.Color,fe=new THREE.Color,ye=new THREE.Color,xe=new THREE.Vector3,ve=new THREE.Vector3,Te=new THREE.Vector3,Re=new THREE.Matrix3;void 0===Y.setLineDash&&(Y.setLineDash=function(){}),this.domElement=I,this.devicePixelRatio=void 0!==t.devicePixelRatio?t.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(t,e,i){W=t*this.devicePixelRatio,G=e*this.devicePixelRatio,I.width=W,I.height=G,Z=Math.floor(W/2),X=Math.floor(G/2),i!==!1&&(I.style.width=t+"px",I.style.height=e+"px"),pe.min.set(-Z,-X),pe.max.set(Z,X),Ee.min.set(-Z,-X),Ee.max.set(Z,X),J=1,K=0,te=null,ee=null,ie=null,re=null,ne=null,this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,r){var n=t*this.devicePixelRatio,s=e*this.devicePixelRatio,o=i*this.devicePixelRatio,a=r*this.devicePixelRatio;Y.setTransform(o/W,0,0,-a/G,n,G-s),Y.translate(Z,X)},this.setScissor=function(){},this.enableScissorTest=function(){},this.setClearColor=function(t,e){Q.set(t),$=void 0!==e?e:1,Ee.min.set(-Z,-X),Ee.max.set(Z,X)},this.setClearColorHex=function(t,e){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(t,e)},this.getMaxAnisotropy=function(){return 0},this.clear=function(){Ee.empty()===!1&&(Ee.intersect(pe),Ee.expandByScalar(2),1>$&&Y.clearRect(0|Ee.min.x,0|Ee.min.y,Ee.max.x-Ee.min.x|0,Ee.max.y-Ee.min.y|0),$>0&&(m(THREE.NormalBlending),E(1),v("rgba("+Math.floor(255*Q.r)+","+Math.floor(255*Q.g)+","+Math.floor(255*Q.b)+","+$+")"),Y.fillRect(0|Ee.min.x,0|Ee.min.y,Ee.max.x-Ee.min.x|0,Ee.max.y-Ee.min.y|0)),Ee.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(t,i){if(i instanceof THREE.Camera==!1)return void console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");this.autoClear===!0&&this.clear(),U.info.render.vertices=0,U.info.render.faces=0,g=q.projectScene(t,i,this.sortObjects,this.sortElements),w=g.elements,H=g.lights,M=i,Re.getNormalMatrix(i.matrixWorldInverse),e();for(var o=0,a=w.length;a>o;o++){var h=w[o],c=h.material;if(void 0!==c&&0!==c.opacity){if(me.makeEmpty(),h instanceof THREE.RenderableSprite)b=h,b.x*=Z,b.y*=X,r(b,h,c);else if(h instanceof THREE.RenderableLine)b=h.v1,z=h.v2,b.positionScreen.x*=Z,b.positionScreen.y*=X,z.positionScreen.x*=Z,z.positionScreen.y*=X,me.setFromPoints([b.positionScreen,z.positionScreen]),pe.isIntersectionBox(me)===!0&&n(b,z,h,c);else if(h instanceof THREE.RenderableFace){if(b=h.v1,z=h.v2,S=h.v3,b.positionScreen.z<-1||b.positionScreen.z>1)continue;if(z.positionScreen.z<-1||z.positionScreen.z>1)continue;if(S.positionScreen.z<-1||S.positionScreen.z>1)continue;b.positionScreen.x*=Z,b.positionScreen.y*=X,z.positionScreen.x*=Z,z.positionScreen.y*=X,S.positionScreen.x*=Z,S.positionScreen.y*=X,c.overdraw>0&&(p(b.positionScreen,z.positionScreen,c.overdraw),p(z.positionScreen,S.positionScreen,c.overdraw),p(S.positionScreen,b.positionScreen,c.overdraw)),me.setFromPoints([b.positionScreen,z.positionScreen,S.positionScreen]),pe.isIntersectionBox(me)===!0&&s(b,z,S,0,1,2,h,c)}Ee.union(me)}}}},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(t){this.positionWorld.copy(t.positionWorld),this.positionScreen.copy(t.positionScreen)},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=null,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0};